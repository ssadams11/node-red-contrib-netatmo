<!--
  Copyright 2016 IBM Corp.
  Licensed under the Apache License, Version 2.0 (the "License");
  you may not use this file except in compliance with the License.
  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0
  
  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.
-->

<!-- *************************************************************  -->
<!-- * Generic Functions *  -->
<!-- *************************************************************  -->

<script type="text/javascript">
/* global $ RED */
// eslint-disable-next-line no-unused-vars
function oneditprepareDeviceId(required, typeFilter = null) {
    $('#node-input-deviceId-scan').click(function()
    {
        const nodeIdCred = $('#node-input-creds option:selected').val();

        const current = $('#node-input-deviceId').val();
        $('#node-input-deviceId').replaceWith('<select id="node-input-deviceId" style="width: 100%"></select>');
        $('#node-input-deviceId').append('<option selected="selected" value="null">Searching for devices...</option>');

        $.get('netatmo/homes', {nodeIdCred:nodeIdCred})
            .done( function(body) {
                const data = JSON.parse(body);

                if(data.error) {
                    RED.notify(data.error, { type: "error" });
                }
                const homes = data.homes;
                // RESET OPTIONS
                $('#node-input-deviceId').empty();

                if(homes.length <= 0) {
                    // Create input
                    $('#node-input-deviceId').replaceWith('<input type="text" id="node-input-deviceId" placeholder="5bXXXXXXXXXXXXXXXXXXXXXX" style="width: 100%"/>');
                    $('#node-input-deviceId').val(current);
                    RED.notify("no homes found", { type: "error" });
                } else {
                    // Create select
                    $('#node-input-deviceId').replaceWith('<select required id="node-input-deviceId" style="width: 100%"></select>');
                    if (!required) {
                        $('#node-input-deviceId').append('<option value="">(empty)</option>');
                    }
                    // SET modules AS OPTIONS
                    homes.forEach(function(home) {
                        if (home.modules.length >= 0) {
                            home.modules.forEach(function(module) {
                                if (!typeFilter || typeFilter === module.type) {
                                    $('#node-input-deviceId').append('<option value="' + module.id + '">' + module.name + ' (' + module.type + ') - ' + module.id + '</option>');
                                }
                            });
                        }
                    });
                    $('#node-input-deviceId').val(current);
                }
            });
    });
}

function oneditprepareHomeId() {
    $('#node-input-homeId-scan').click(function()
    {
        const nodeIdCred = $('#node-input-creds option:selected').val();

        const current = $('#node-input-homeId').val();
        $('#node-input-homeId').replaceWith('<select id="node-input-homeId" style="width: 100%"></select>');
        $('#node-input-homeId').append('<option selected="selected" value="null">Searching for homes...</option>');
        
        $.get('netatmo/homes', {nodeIdCred:nodeIdCred})
            .done( function(body) {
                const data = JSON.parse(body);

                if(data.error) {
                    RED.notify(data.error, { type: "error" });
                }
                const homes = data.homes;
                // RESET OPTIONS
                $('#node-input-homeId').empty();

                if(homes.length <= 0) {
                    // Create input
                    $('#node-input-homeId').replaceWith('<input type="text" id="node-input-homeId" placeholder="5bXXXXXXXXXXXXXXXXXXXXXX" style="width: 100%"/>');
                    $('#node-input-homeId').val(current);
                    RED.notify("no home found", { type: "error" });
                } else {
                    // Create select
                    $('#node-input-homeId').replaceWith('<select id="node-input-homeId" style="width: 100%"></select>');
                    $('#node-input-homeId').append('<option value="">(empty)</option>');
                    // SET homes AS OPTIONS
                    homes.forEach(function(home) {
                        $('#node-input-homeId').append('<option value="' + home.id + '">' + home.name + '</option>');
                    });
                    $('#node-input-homeId').val(current);
                }
            });
    });
}

</script>

<!-- *************************************************************  -->

<script type="text/javascript">
    console.log("registering netatmo get next events");
    /* global RED */
    RED.nodes.registerType('get next events',{
        category: 'Netatmo',
        color: '#87A980',
        defaults: {
            name: {value:""},
            creds: {value:"",type:"configNode"},
            home_id: {value:""},
            event_id: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-video-camera",
        label: function() {
            return this.name||"get next events";
        }
    });
</script>

<script type="text/x-red" data-template-name="get next events">
    <div class="form-row">
        <label for="node-input-creds"><i class="fa fa-server"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
        <label for="node-input-home_id"><i class="icon-tag"></i> Home ID:</label>
        <input type="text" id="node-input-home_id" placeholder="577fff..."">
    </div>
    <div class="form-row">
        <label for="node-input-event_id"><i class="icon-tag"></i> Event ID:</label>
        <input type="text" id="node-input-event_id" placeholder="57816...">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="get next events">
   <p>This node returns information about the netatmo welcome next events with these credentials.</p>
   <p>Parameters:</p>
   <ul>
        <li>Home ID: something like 577fff842baa3c18948b4571</li>
        <li>Event ID: something like 5781611045a1e322938b458f</li>
   </ul>
   <p>Outputs an object called <b>msg</b> containing <b>msg.topic</b> and
   <b>msg.payload</b>. msg.payload is JSON.</p>
   <p>See <a href="https://dev.netatmo.com/dev/resources/technical/reference/welcome/getnextevents" target=_blank>https://dev.netatmo.com/dev/resources/technical/reference/welcome/getnextevents</a> for details on format</p>
</script>
<!-- *************************************************************  -->

<script type="text/javascript">
    console.log("registering netatmo get camera picture");
    RED.nodes.registerType('get camera picture',{
        category: 'Netatmo',
        color: '#87A980',
        defaults: {
            name: {value:""},
            creds: {value:"",type:"configNode"},
            image_id: {value:""},
            key: {value:""}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-video-camera",
        label: function() {
            return this.name||"get camera picture";
        }
    });
</script>

<script type="text/x-red" data-template-name="get camera picture">
    <div class="form-row">
        <label for="node-input-creds"><i class="fa fa-server"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
        <label for="node-input-image_id"><i class="icon-tag"></i> Image ID</label>
        <input type="text" id="node-input-image_id" placeholder="56c89c83...">
    </div>
    <div class="form-row">
        <label for="node-input-key"><i class="icon-tag"></i> Security Key</label>
        <input type="text" id="node-input-key" placeholder="8627b4...">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="get camera picture">
   <p>This node returns information about the netatmo welcome camera picture with these credentials.</p>
   <p>Outputs an object called <b>msg</b> containing <b>msg.topic</b> and
   <b>msg.payload</b>. msg.payload is JSON.</p>
   <p>See <a href="https://dev.netatmo.com/dev/resources/technical/reference/welcome/getcamerapicture" target=_blank>https://dev.netatmo.com/dev/resources/technical/reference/welcome/getcamerapicturer</a> for details on format</p>
</script>
<!-- ************************************************************* 
     * Api is marked Deprecated by netatmo 
     ************************************************************* -->

<script type="text/javascript">
    console.log("registering netatmo get home data");
    RED.nodes.registerType('get home data',{
        category: 'Netatmo',
        color: '#87A980',
        defaults: {
            name: {value:""},
            creds: {value:"",type:"configNode"}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-video-camera",
        label: function() {
            return this.name||"get home data";
        }
    });
</script>

<script type="text/html" data-template-name="get home data">
    <div class="form-row">
        <label for="node-input-creds"><i class="fa fa-server"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/html" data-help-name="get home data">
    <p><b>Api is marked Deprecated by netatmo!</b></p>
    <p>This node returns information about the netatmo welcome home data with these credentials.</p>
    <p>Outputs an object called <b>msg</b> containing <b>msg.topic</b> and
    <b>msg.payload</b>. msg.payload is JSON.</p>
    <p>See <a href="https://dev.netatmo.com/dev/resources/technical/reference/welcome/gethomedata" target=_blank>https://dev.netatmo.com/dev/resources/technical/reference/welcome/gethomedata</a> for details on format</p>
</script>

<!-- *************************************************************  -->

<script type="text/javascript">
    console.log("registering netatmo set person away");
    RED.nodes.registerType('set person away',{
        category: 'Netatmo',
        color: '#87A980',
        defaults: {
            name: {value:""},
            creds: {value:"",type:"configNode"},
            home_id: {value:""},
            person_id: {value:""}	
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-video-camera",
        label: function() {
            return this.name||"set person away";
        }
    });
</script>

<script type="text/x-red" data-template-name="set person away">
    <div class="form-row">
        <label for="node-input-creds"><i class="fa fa-server"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
        <label for="node-input-home_id"><i class="icon-tag"></i> Home ID:</label>
        <input type="text" id="node-input-home_id" placeholder="577fff..."">
    </div>
    <div class="form-row">
        <label for="node-input-person_id"><i class="icon-tag"></i> Person ID:</label>
        <input type="text" id="node-input-person_id" placeholder="d1234... or not valued to set Home as Empty.">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="set person away">
   <p>This node set person away or home empty.</p>
   <p>Parameters:</p>
   <ul>
        <li>Home ID: something like 577fff842baa3c18948b4571</li>
        <li>Person ID (optional): something like 766764b1-dcef-4321-b057-e0c8e2e329cf</li>
   </ul>
   <p>See <a href="https://dev.netatmo.com/apidocumentation/security#setpersonsaway" target=_blank>https://dev.netatmo.com/apidocumentation/security#setpersonsaway</a> for details on format</p>
</script>

<!-- *************************************************************  -->

<!-- *************************************************************  -->

<script type="text/javascript">
    console.log("registering netatmo get public data");
    RED.nodes.registerType('get public data',{
        category: 'Netatmo',
        color: '#C0DEED',
        defaults: {
            name: {value:""},
            lat_ne: {value: '15'},
            lon_ne: {value: '20'},
            lat_sw: {value: '-15'},
            lon_sw: {value: '-20'},
            required_data: {value:'rain,humidity'},
            filter: {value:"false"},
            creds: {value:"",type:"configNode"}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-cloud",
        label: function() {
            return "get public data";
        }
    });
</script>

<script type="text/x-red" data-template-name="get public data">
    <div class="form-row">
        <label for="node-input-creds"><i class="fa fa-server"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
        <label for="node-input-lat_ne"><i class="icon-tag"></i> Latitude noth-east corner</label>
        <input type="text" id="node-input-lat_ne" value="15">
    </div>
    <div class="form-row">
        <label for="node-input-lon_ne"><i class="icon-tag"></i> Longitude noth-east corner</label>
        <input type="text" id="node-input-lon_ne" value="20">
    </div>
    <div class="form-row">
        <label for="node-input-lat_sw"><i class="icon-tag"></i> Latitude south-west corner</label>
        <input type="text" id="node-input-lat_sw" value="-15">
    </div>
    <div class="form-row">
        <label for="node-input-lon_sw"><i class="icon-tag"></i> Longitude south-west corner</label>
        <input type="text" id="node-input-lon_sw" value="-20">
    </div>
    <div class="form-row">
        <label for="node-input-required_data" title="any mix of Temperature,CO2,Rain,Humidity,Pressure,Noise"><i class="icon-tag"></i> Required data</label>
        <input type="text" id="node-input-required_data" value="rain,humidity">
    </div>
    <div class="form-row">
        <label for="node-input-filter"><i class="icon-tag"></i> Filter</label>
        <input type="text" id="node-input-filter" value="false">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="get public data">
   <p>This node returns public data from netatmo with this username and credentials.</p>
   <p>Outputs an object called <b>msg</b> containing <b>msg.topic</b> and
   <b>msg.payload</b>. msg.payload is JSON.</p>
   <p>See <a href="https://dev.netatmo.com/resources/technical/reference/weatherapi/getpublicdata" target=_blank>https://dev.netatmo.com/resources/technical/reference/weatherapi/getpublicdata</a> for details on format</p>
</script>

<!-- *************************************************************  -->

<script type="text/javascript">
    // console.log("registering netatmo homes data");
    RED.nodes.registerType('homes data',{
        category: 'Netatmo',
        color: '#FFCC66',
        defaults: {
            name: {value:""},
            homeId: {value: ''},
			gatewayTypes: {value: ''},
            creds: {value:"",type:"configNode"}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-home",
        label: function() {
            return this.name||"home data";
        },
        oneditprepare: function() {
            // eslint-disable-next-line no-undef
            oneditprepareHomeId();
        }
    });
</script>

<script type="text/html" data-template-name="homes data">
    <div class="form-row">
        <label for="node-input-creds"><i class="fa fa-server"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
		<label for="node-input-homeId" title="id of home"><i class="fa fa-home"></i> Home ID</label>
		<div style="display: inline-block; position: relative; width: 70%; height: 20px;">
            <div style="position: absolute; left: 0px; right: 40px;">
                <input type="text" id="node-input-homeId" placeholder="5bXXXXXXXXXXXXXXXXXXXXXX" style="width: 100%"/>
            </div>
            <a id="node-input-homeId-scan" class="editor-button" style="position: absolute; right: 0px; top: 0px;">
                <i class="fa fa-search"></i>
            </a>
        </div>
	</div>
    <div class="form-row">
        <label for="node-input-gatewayTypes" title="Array of desired gateway"><i class="icon-tag"></i> Gateway Types</label>
        <input type="text" id="node-input-gatewayTypes" placeholder="NAPlug | NATherm1 | NRV">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/html" data-help-name="homes data">
   <p>This node returns user's homes and their topology for Home+Control, Home+Security and Energy devices.</p>
   <h3>Inputs</h3>
   <dl class="message-properties">
       <dt class="optional">msg.homeId<span class="property-type">string</span>
       </dt>
       <dd>If specified the function will overwrite the node's Home ID.</dd>
       <dt class="optional">msg.gatewayTypes<span class="property-type">string, array of strings</span>
       </dt>
       <dd>If specified the function will overwrite the node's Gateway Types.</dd>
   </dl>
   <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">(object)</span>
        </dt>
        <dd>see netatmo api details</dd>
    </dl>
    <h3>Details</h3>
    <p>Home ID can be left empty, if <code>msg.homeId</code> is set.</p>
    <p>Gateway Types an be left empty, if <code>msg.gatewayTypes</code> is set. Gateway Types are</p>
    <ul>
        <li>Home+Control : NLP, ...</li>
        <li>Home+Security: NACamera, NOC, NSD, ...</li>
        <li>Energy : NAPlug, NATherm1, NRV</li>
    </ul>

    <p>See <a href="https://dev.netatmo.com/apidocumentation/control#homesdata" target=_blank>https://dev.netatmo.com/apidocumentation/control#homesdata</a> for details on format</p>

    <p>See <a href="https://dev.netatmo.com/apidocumentation/security#homesdata" target=_blank>https://dev.netatmo.com/apidocumentation/security#homesdata</a> for details on format</p>

    <p>See <a href="https://dev.netatmo.com/apidocumentation/energy#homesdata" target=_blank>https://dev.netatmo.com/apidocumentation/energy#homesdata</a> for details on format</p>
</script>

<!-- *************************************************************  -->

<script type="text/javascript">
    console.log("registering netatmo home status");
    RED.nodes.registerType('home status',{
        category: 'Netatmo',
        color: '#FFCC66',
        defaults: {
            name: {value:""},
            homeId: {value: ''},
			deviceTypes: {value: ''},
            creds: {value:"",type:"configNode"}
        },
        inputs:1,
        outputs:1,
        icon: "font-awesome/fa-home",
        label: function() {
            return this.name||"home status";
        },
        oneditprepare: function() {
            // eslint-disable-next-line no-undef
            oneditprepareHomeId();
        }
    });
</script>

<script type="text/html" data-template-name="home status">
    <div class="form-row">
        <label for="node-input-creds"><i class="icon-tag"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
		<label for="node-input-homeId" title="id of home"><i class="fa fa-home"></i> Home ID</label>
		<div style="display: inline-block; position: relative; width: 70%; height: 20px;">
            <div style="position: absolute; left: 0px; right: 40px;">
                <input type="text" id="node-input-homeId" placeholder="5bXXXXXXXXXXXXXXXXXXXXXX" style="width: 100%"/>
            </div>
            <a id="node-input-homeId-scan" class="editor-button" style="position: absolute; right: 0px; top: 0px;">
                <i class="fa fa-search"></i>
            </a>
        </div>
	</div>
    <!--div class="form-row">
        <label for="node-input-homeId" title="id of home"><i class="icon-tag"></i> Home ID</label>
        <input type="text" id="node-input-homeId" placeholder="5bXXXXXXXXXXXXXXXXXXXXXX">
    </div-->
    <div class="form-row">
        <label for="node-input-deviceTypes" title="Array of device type"><i class="icon-tag"></i> Device Type Array</label>
        <input type="text" id="node-input-deviceTypes" placeholder="NAPlug | NATherm1 | NRV">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/html" data-help-name="home status">
   <p>This node returns the current status of a home and the associated Home+Control, Home+Security and Energy devices.</p>
   <h3>Inputs</h3>
   <dl class="message-properties">
       <dt class="optional">msg.homeId<span class="property-type">string</span>
       </dt>
       <dd>If specified the function will overwrite the node's Home ID.</dd>
   </dl>
   <h3>Outputs</h3>
    <dl class="message-properties">
        <dt>payload<span class="property-type">(object)</span>
        </dt>
        <dd>see netatmo api details</dd>
    </dl>
    <h3>Details</h3>
    <p>Home ID can be left empty, if <code>msg.homeId</code> is set.</p>
    <p>See <a href="https://dev.netatmo.com/apidocumentation/control#homestatus" target=_blank>https://dev.netatmo.com/apidocumentation/control#homestatus</a> for details on format</p>

    <p>See <a href="https://dev.netatmo.com/apidocumentation/security#homestatus" target=_blank>https://dev.netatmo.com/apidocumentation/security#homestatus</a> for details on format</p>

    <p>See <a href="https://dev.netatmo.com/apidocumentation/energy#homestatus" target=_blank>https://dev.netatmo.com/apidocumentation/energy#homestatus</a> for details on format</p>
</script>

<!-- *************************************************************  -->

<script type="text/javascript">
    console.log("registering netatmo set therm mode");
    RED.nodes.registerType('set therm mode',{
        category: 'Netatmo',
        color: '#FFCC66',
        defaults: {
            name: {value:""},
            homeId: {value: ''},
            mode: {value: ''},
            endtime: {value: ''},
            creds: {value:"",type:"configNode"}
        },
        inputs:1,
        outputs:0,
        icon: "font-awesome/fa-thermometer-full",
        label: function() {
            return "set therm mode";
        }
    });
</script>

<script type="text/x-red" data-template-name="set therm mode">
    <div class="form-row">
        <label for="node-input-creds"><i class="fa fa-server"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
        <label for="node-input-homeId" title="id of home"><i class="icon-tag"></i> Home ID</label>
        <input type="text" id="node-input-homeId" placeholder="5bXXXXXXXXXXXXXXXXXXXXXX">
    </div>
    <div class="form-row">
        <label for="node-input-mode" title="Heating mode"><i class="icon-tag"></i> Heating mode</label>
        <input type="text" id="node-input-mode" placeholder="schedule or away or hg">
    </div>
    <div class="form-row">
        <label for="node-input-endtime" title="Endtime"><i class="icon-tag"></i> Endtime</label>
        <input type="text" id="node-input-endtime" placeholder="timestamp">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="set therm mode">
   <p>This node sets the home heating system to use schedule/ away/ frost guard mode</p>
   <p>See <a href="https://dev.netatmo.com/resources/technical/reference/energy/setthermmode" target=_blank>https://dev.netatmo.com/resources/technical/reference/energy/setthermmode</a> for details on format</p>
</script>

<!-- *************************************************************  -->

<script type="text/javascript">
    console.log("registering netatmo set room therm point");
    RED.nodes.registerType('set room therm point',{
        category: 'Netatmo',
        color: '#FFCC66',
        defaults: {
            name: {value:""},
            homeId: {value: ''},
            roomId: {value: ''},
            mode: {value: ''},
            temp: {value: ''},
            endtime: {value: ''},
            creds: {value:"",type:"configNode"}
        },
        inputs:1,
        outputs:0,
        icon: "font-awesome/fa-thermometer-full",
        label: function() {
            return "set room therm point";
        }
    });
</script>

<script type="text/x-red" data-template-name="set room therm point">
    <div class="form-row">
        <label for="node-input-creds"><i class="fa fa-server"></i> Creds</label>
        <input type="text" id="node-input-creds" placeholder="Add netatmo creds">
    </div>
    <div class="form-row">
        <label for="node-input-homeId" title="id of home"><i class="icon-tag"></i> Home ID</label>
        <input type="text" id="node-input-homeId" placeholder="5bXXXXXXXXXXXXXXXXXXXXXX">
    </div>
    <div class="form-row">
        <label for="node-input-roomId" title="id of room"><i class="icon-tag"></i> Room ID</label>
        <input type="text" id="node-input-roomId" placeholder="xxxxxxxxxx">
    </div>
    <div class="form-row">
        <label for="node-input-mode" title="The mode you are applying to this room"><i class="icon-tag"></i> Mode</label>
        <input type="text" id="node-input-mode" placeholder="manual OR home">
    </div>
    <div class="form-row">
        <label for="node-input-temp" title="Manual temperature to apply"><i class="icon-tag"></i> Temperature</label>
        <input type="text" id="node-input-temp" placeholder="15">
    </div>
    <div class="form-row">
        <label for="node-input-endtime" title="Endtime"><i class="icon-tag"></i> Endtime</label>
        <input type="text" id="node-input-endtime" placeholder="timestamp">
    </div>
    <div class="form-row">
        <label for="node-input-name"><i class="icon-tag"></i> Name</label>
        <input type="text" id="node-input-name" placeholder="Name">
    </div>
</script>

<script type="text/x-red" data-help-name="set room therm point">
   <p>This node set a manual temperature to a room. or switch back to home mode.</p>
   <p>See <a href="https://dev.netatmo.com/resources/technical/reference/energy/homestatus" target=_blank>https://dev.netatmo.com/resources/technical/reference/energy/homestatus</a> for details on format</p>
</script>

<!-- *************************************************************  -->
<!-- * Configuration Node *  -->
<!-- *************************************************************  -->

<script type="text/javascript">
    // console.log("registering netatmo config node");
    RED.nodes.registerType('configNode',{
        category: 'config',
        credentials: {
            client_id: {type:"text"},
            client_secret: {type:"text"},
            username: {type:"text"},
            password: {type:"password"}
        },
        defaults: {
            name: {value:""}
        },
        label: function() {
            return this.name||"netatmo configNode";
        },
        oneditprepare: function() {
            // eslint-disable-next-line no-undef
            oneditprepareDeviceId(true);
        }
    });
</script>

<script type="text/html" data-template-name="configNode">
    <div class="form-row">
        <label for="node-config-input-client_id"><i class="fa fa-tag"></i> Client ID</label>
        <input required type="text" id="node-config-input-client_id" placeholder="56e984c449c7...">
    </div>
    <div class="form-tips"><b>Tip:</b> Client ID from App information page in your Netatmo connect Account</div><br/>
    <div class="form-row">
        <label for="node-config-input-client_secret"><i class="fa fa-tag"></i> Client Secret</label>
        <input required type="text" id="node-config-input-client_secret" placeholder="X4l1Ct9G....">
    </div>
    <div class="form-tips"><b>Tip:</b> Client secret from App information page in your Netatmo connect Account</div><br/>
    <div class="form-row">
        <label for="node-config-input-username"><i class="fa fa-user"></i> User name</label>
        <input required type="text" id="node-config-input-username" placeholder="your@email.com">
    </div>
    <div class="form-tips"><b>Tip:</b> User of your Netatmo connect Account</div><br/>
    <div class="form-row">
        <label for="node-config-input-password"><i class="fa fa-lock"></i> Password</label>
        <input required type="password" id="node-config-input-password" placeholder="yourPassword">
    </div>
    <div class="form-tips"><b>Tip:</b> Password of your Netatmo connect Account</div><br/>
    <div class="form-row">
        <label for="node-config-input-name"><i class="fa fa-tag"></i> Name</label>
        <input type="text" id="node-config-input-name" placeholder="Name">
    </div>
</script>
